"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logger=void 0,exports.logRequest=logRequest,exports.logResponse=logResponse;const http_config_1=require("../http-config");function logRequest(o,e,t,g){if(!http_config_1.debugConfig.logRequests||http_config_1.debugConfig.level<http_config_1.DebugLevel.INFO)return;const n={...t};n.Authorization&&(n.Authorization=n.Authorization.replace(/Bearer .+/,"Bearer [REDACTED]")),exports.logger.info(`${o} ${e}`,{headers:n,body:g&&http_config_1.debugConfig.prettyPrintJSON?JSON.parse(JSON.stringify(g)):g})}function logResponse(o){if(!http_config_1.debugConfig.logResponses)return;("error"===(o.status>=400?"error":"info")?exports.logger.error.bind(exports.logger):exports.logger.info.bind(exports.logger))(`Respuesta ${o.status} ${o.config.url}`,{status:o.status,headers:o.headers,data:o.data})}exports.logger={error(o,e){http_config_1.debugConfig.level>=http_config_1.DebugLevel.ERROR&&this._log("error",o,e)},warn(o,e){http_config_1.debugConfig.level>=http_config_1.DebugLevel.WARNING&&this._log("warning",o,e)},info(o,e){http_config_1.debugConfig.level>=http_config_1.DebugLevel.INFO&&this._log("info",o,e)},debug(o,e){http_config_1.debugConfig.level>=http_config_1.DebugLevel.DEBUG&&this._log("debug",o,e)},_log(o,e,t){const g=`color: ${http_config_1.debugConfig.colors[o]||http_config_1.debugConfig.colors.default}; font-weight: bold;`,n=(new Date).toISOString(),r=`[HTTP:${o.toUpperCase()}] [${n}]`;console.group(`%c${r} ${e}`,g),void 0!==t&&(http_config_1.debugConfig.prettyPrintJSON&&"object"==typeof t?(console.log("%cDatos:","font-weight: bold"),console.dir(t,{depth:null,colors:!0})):console.log("%cDatos:","font-weight: bold",t)),console.groupEnd()}};